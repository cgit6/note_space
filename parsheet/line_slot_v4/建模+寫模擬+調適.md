## 遊戲規格

```
作一個簡單的BG FG 遊戲 3x5 左到右 20 線
圖標只有基本圖標 C1 和 W1（圖標總數(不含 None)約 10 個左右，賠率表你自訂

BG
1. 3C1 以上觸發 10 局 FG，3C1 4C1 5C1 得分不同

FG
1. 3C1 以上 +5 局 FG，3C1 4C1 5C1 得分不同
2. 通過 Wild 的得分 x3 倍（一條線上多個 Wild 不會累乘）

-------------------------------
給一組配置，滿足：

1. BG 50~65% RTP
2. 得分率介於 30%~40%
3. FG 平均約 120 轉左右左右觸發一次
4. FG 中要有破千倍的得分
5. 總體 RTP 介於 96%~97%
6. CV 大於 9
```

## 數值結果

詳見 excel / Game Summery sheet

<div style="text-align:center">
  <img src="https://hackmd.io/_uploads/SkPLuFWW-x.png" style="width:70%;">
    <p>圖 1 模擬結果與理論值</p>
</div>

code 模擬 1 億次結果

```go=
Elapsed time: 25.770142 seconds
----------------------- detail ----------------------------
BG C1 Win=0.054193           // base game C1 rtp
BG Sym Win=0.581308          // base game 得分符號 rtp
FG C1 Win=0.004834           // Free Game C1 rtp
FG Sym Win=0.326984          // Free Game 得分符號 rtp
cv_bg_per_spin=3.468998      // bg cv
cv_fg_per_session=1.155334   // fg cv
----------------------- all ----------------------------
TotalBet=2000000000          // 總下注
TotalWin=1934637844          // 總贏
RTP=0.967319                 // rtp
cv_total=6.429266            // cv
fg trigger rate=0.008564     // Free Game 觸發率
hit rate(pay spin)=0.323545  // 得分率
```

## 文件

[Excel 文件](https://docs.google.com/spreadsheets/d/1ZZUYusikSiQDiVpgFvjWn6BTJfpeQmHp8YFo_HBsEkw/edit?usp=sharing)

## Code

code 內容太大 hackmd 會當掉，所以放 [Github](https://github.com/cgit6/go_slot/tree/master/game1)

`config.go` 包含調整輪帶表與賠率表的過程。 `runner.go` 執行模擬並計算統計值，返回結果。`spinCalculator.go` 線獎算分與處理 FG W1 乘數特色。

## 遊戲規劃

這是一台中高波動的線遊戲，Base Game 大概 3 把中 1 把、回收 60 幾%，剩下 30 幾%的 RTP 都集中在大概每 120 轉一次的 Free Game 裡，Free Game 平均回 40 倍，但有機會拉到上千倍甚至更高，所以整體 CV 大概落在 6 左右。

## 更新: 接下來要把 CV 調整成 9

### 問題

- 開始調整參數的時候，PayTable 是能調整的參數嗎?還是普遍來說這是不能動的?
- 如果能調整在最一開始我要怎麼知道我的 PayTable 是沒問題的?

主要利用 FG 提高 CV，hit rate 幾乎不會有影響，對整個遊戲的 RTP 也會多一個 trigger 係數所以受到的影響比較小

1. FG 問題: FG 把 CV 提高到 9 同時避免提升過多的 RTP (所以需要去考慮值不值得這件事)
   解決方案: 把 FG RTP 往極高倍率集中，同時減少中小獎出現頻率。平衡 FG RTP
2. BG 問題: BG 降 RTP 到符合水準的位置(RTP 96-97%)，同時不要影響 hit rate 與 CV。

### 紀錄

#### STEP1

動機: 提高 W1，降低 "中間符號" 出現頻率(例如: H2、H3、H4、L2、L3) 壓中小獎，期望 Std 會上升，RTP 不要升太多。

先把 CV 值往 9 推又不能讓 RTP 再整體往上跑太多，所以同時要把一些中段、穩定出現的 H2 / H3 / H4 / L2 / L3 刪掉。

==W1 要改前面軸(1,2) 還是後面(4,5)?== 選擇塞 1,2。如果我改 4,5 軸會變成前面很難中，後面以很小的概率中很大的獎，造成大部分時間 FG 什麼都沒有的體驗。BG 就已經沒什麼東西了 FG 再一樣就很難玩了。

壓 "中間倍數符號" 所以前 1,2 軸 的 H2、H3、H4、L2、L3 挑一部份換成 W1

操作:

```
Reel1:
H4(6) → W1(2)
H3(5) → W1(2)
H2(4) → W1(2)
C1(1) → L4(10)

Reel2:
L2(8) → W1(2)
L3(9) → W1(2)

Reel3:
L3(9) → L4(10)
```

模擬結果:

```
TotalBet=200000000
TotalWin=267875940
RTP=1.3394 -> ❗爆，1 spin FG RTP 360% -> 757%
cv=9.662121
trigger=0.008575
hit rate=0.323503
```

結論: 失敗(該版本放棄)，是不是只能依賴在後面軸塞 W1 衝高 std 犧牲遊戲體驗了?

#### STEP2

動機: 利用 W1 提高 FG CV，壓低 中間倍數符號的 RTP，其中 H4 在原始分布中 RTP 最高，因此壓低 H4 是最容易的(提升最少 rtp，H4 只要降的比要換的符號升得快就行了)

<div style="text-align:center">
  <img src="https://hackmd.io/_uploads/BkZQqDB-Wl.png" style="width:40%;">
    <p>圖 2 在 FG 中每個符號的 RTP</p>
</div>

目標: 先把 CV 值往 9 提升又不能讓 RTP 再整體往上跑太多，所以同時要把一些中段符號的 RTP 往下降。

操作: 從頭開始，目前看選 H4 最合適。邏輯是 1-5 軸如果 H4 換 H1-H3 符號 RTP 會下降那就換，如果會上升就不換，為什麼只選 H4 因為 H3、L1-L3 符號的 RTP　都只有 30-40% 不容易再降，所以優先考慮 H4。
模擬結果:

```
TotalBet=2000000000
TotalWin=1949801435
RTP=0.9749 -> ❗略微超過
cv=9.298077
trigger=0.008565
hit rate=0.323629
```

結論:
